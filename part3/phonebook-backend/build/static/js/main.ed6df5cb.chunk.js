(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{43:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var c=t(18),o=t.n(c),r=t(19),u=t(3),s=t(1),a=t(0),i=function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("li",{id:e.person.id,children:[" ",e.person.name," ",e.person.number,"  "]},e.person.name),Object(a.jsx)("button",{onClick:function(){return e.handleDelete(e.person.id,e.person.name)},children:" Delete "})]})},l=function(e){return Object(a.jsx)("ul",{children:e.persons.filter((function(n){return n.name.toLowerCase().match(e.search.toLowerCase())})).map((function(n){return Object(a.jsx)(i,{person:n,handleDelete:e.handleDelete},n.id)}))})},d=function(e){return Object(a.jsxs)("form",{onSubmit:e.AddPerson,children:[Object(a.jsxs)("div",{children:["name: ",Object(a.jsx)("input",{value:e.newName,onChange:e.handleName}),"number: ",Object(a.jsx)("input",{value:e.newNumber,onChange:e.handleNumber})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",children:"add"})})]})},j=function(e){return Object(a.jsx)("form",{children:Object(a.jsxs)("div",{children:["Search: ",Object(a.jsx)("input",{type:"search",value:e.search,onChange:e.handleSearch})]})})},h=t(5),b=t.n(h),f="/api/persons",O=function(){return b.a.get(f).then((function(e){return e.data}))},m=function(e){return b.a.post(f,e).then((function(e){return e.data}))},p=function(e,n){return b.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},x=function(e){return b.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},g=function(){var e=Object(s.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],o=Object(s.useState)(""),i=Object(u.a)(o,2),h=i[0],b=i[1],f=Object(s.useState)(""),g=Object(u.a)(f,2),v=g[0],N=g[1],S=Object(s.useState)(""),w=Object(u.a)(S,2),y=w[0],C=w[1],k=Object(s.useState)(null),J=Object(u.a)(k,2),D=J[0],A=J[1],T=Object(s.useState)(""),P=Object(u.a)(T,2),E=P[0],I=P[1];Object(s.useEffect)((function(){O().then((function(e){c(e)}))}),[]);var L=function(e){var n=e.message,t=e.type;return null===n?null:Object(a.jsx)("div",{className:t,children:n})};return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Phonebook"}),Object(a.jsx)(j,{search:y,handleSearch:function(e){C(e.target.value)}}),Object(a.jsx)("h2",{children:" Add a new "}),Object(a.jsx)(L,{message:D,type:E}),Object(a.jsx)(d,{AddPerson:function(e){e.preventDefault();var n={name:h,number:v},o=Object(r.a)(t).findIndex((function(e){return e.name===h}));o>-1?window.confirm(h+" Already exists, would you like to update their number?")&&p(t[o].id,n).then((function(e){c(t.map((function(n){return n.id===e.id?e:n}))),A("Added "+h),I("sucess"),setTimeout((function(){A(null)}),5e3)})).catch((function(e){I("error"),A(JSON.stringify(e.response.data)),console.log(JSON.stringify(e.response.data)),console.log("Could not Create: "+h),setTimeout((function(){A(null)}),5e3)})):m(n).then((function(e){c(t.concat(e)),A("Added "+h),I("sucess"),setTimeout((function(){A(null)}),5e3)})).catch((function(e){I("error"),A(JSON.stringify(e.response.data)),console.log(JSON.stringify(e.response.data)),console.log("Could not Create: "+h),setTimeout((function(){A(null)}),5e3)}))},newName:h,handleName:function(e){b(e.target.value)},newNumber:v,handleNumber:function(e){N(e.target.value)}}),Object(a.jsx)("h2",{children:"Numbers"}),Object(a.jsx)(l,{persons:t,search:y,handleDelete:function(e,n){window.confirm("Would you like to delete "+n+" ?")&&x(e).then((function(o){console.log(n+" was deleted"),c(t.filter((function(n){return n.id!==e})))})).catch((function(e){I("error"),A(JSON.stringify(e.response.data)),console.log(JSON.stringify(e.response.data)),console.log("Could not Delete: "+h),setTimeout((function(){A(null)}),5e3)}))}})]})};t(43);o.a.render(Object(a.jsx)(g,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.ed6df5cb.chunk.js.map